{"ast":null,"code":"/**\n * @module ol/webgl/TileTexture\n */\n\nimport BaseTileRepresentation from './BaseTileRepresentation.js';\nimport DataTile, { asArrayLike, asImageLike } from '../DataTile.js';\nimport EventType from '../events/EventType.js';\nimport ImageTile from '../ImageTile.js';\nimport ReprojTile from '../reproj/Tile.js';\nimport WebGLArrayBuffer from './Buffer.js';\nimport { ARRAY_BUFFER, STATIC_DRAW } from '../webgl.js';\nimport { createCanvasContext2D } from '../dom.js';\nimport { toSize } from '../size.js';\n\n/**\n * @param {WebGLRenderingContext} gl The WebGL context.\n * @param {WebGLTexture} texture The texture.\n * @param {boolean} interpolate Interpolate when resampling.\n */\nfunction bindAndConfigure(gl, texture, interpolate) {\n  const resampleFilter = interpolate ? gl.LINEAR : gl.NEAREST;\n  gl.bindTexture(gl.TEXTURE_2D, texture);\n  gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);\n  gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);\n  gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, resampleFilter);\n  gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, resampleFilter);\n}\n\n/**\n * @param {WebGLRenderingContext} gl The WebGL context.\n * @param {WebGLTexture} texture The texture.\n * @param {import(\"../DataTile.js\").ImageLike} image The image.\n * @param {boolean} interpolate Interpolate when resampling.\n */\nfunction uploadImageTexture(gl, texture, image, interpolate) {\n  bindAndConfigure(gl, texture, interpolate);\n  gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, gl.RGBA, gl.UNSIGNED_BYTE, image);\n}\n\n/**\n * @param {import(\"./Helper.js\").default} helper The WebGL helper.\n * @param {WebGLTexture} texture The texture.\n * @param {import(\"../DataTile.js\").ArrayLike} data The pixel data.\n * @param {import(\"../size.js\").Size} size The pixel size.\n * @param {number} bandCount The band count.\n * @param {boolean} interpolate Interpolate when resampling.\n */\nfunction uploadDataTexture(helper, texture, data, size, bandCount, interpolate) {\n  const gl = helper.getGL();\n  let textureType;\n  let canInterpolate;\n  if (data instanceof Float32Array) {\n    textureType = gl.FLOAT;\n    helper.getExtension('OES_texture_float');\n    const extension = helper.getExtension('OES_texture_float_linear');\n    canInterpolate = extension !== null;\n  } else {\n    textureType = gl.UNSIGNED_BYTE;\n    canInterpolate = true;\n  }\n  bindAndConfigure(gl, texture, interpolate && canInterpolate);\n  const bytesPerRow = data.byteLength / size[1];\n  let unpackAlignment = 1;\n  if (bytesPerRow % 8 === 0) {\n    unpackAlignment = 8;\n  } else if (bytesPerRow % 4 === 0) {\n    unpackAlignment = 4;\n  } else if (bytesPerRow % 2 === 0) {\n    unpackAlignment = 2;\n  }\n  let format;\n  switch (bandCount) {\n    case 1:\n      {\n        format = gl.LUMINANCE;\n        break;\n      }\n    case 2:\n      {\n        format = gl.LUMINANCE_ALPHA;\n        break;\n      }\n    case 3:\n      {\n        format = gl.RGB;\n        break;\n      }\n    case 4:\n      {\n        format = gl.RGBA;\n        break;\n      }\n    default:\n      {\n        throw new Error(\"Unsupported number of bands: \".concat(bandCount));\n      }\n  }\n  const oldUnpackAlignment = gl.getParameter(gl.UNPACK_ALIGNMENT);\n  gl.pixelStorei(gl.UNPACK_ALIGNMENT, unpackAlignment);\n  gl.texImage2D(gl.TEXTURE_2D, 0, format, size[0], size[1], 0, format, textureType, data);\n  gl.pixelStorei(gl.UNPACK_ALIGNMENT, oldUnpackAlignment);\n}\n\n/**\n * @type {CanvasRenderingContext2D}\n */\nlet pixelContext = null;\nfunction createPixelContext() {\n  pixelContext = createCanvasContext2D(1, 1, undefined, {\n    willReadFrequently: true\n  });\n}\n\n/**\n * @typedef {import(\"../DataTile.js\").default|ImageTile|ReprojTile} TileType\n */\n\n/**\n * @extends {BaseTileRepresentation<TileType>}\n */\nclass TileTexture extends BaseTileRepresentation {\n  /**\n   * @param {import(\"./BaseTileRepresentation.js\").TileRepresentationOptions<TileType>} options The tile texture options.\n   */\n  constructor(options) {\n    super(options);\n\n    /**\n     * @type {Array<WebGLTexture>}\n     */\n    this.textures = [];\n\n    /**\n     * @type {import(\"../size.js\").Size}\n     * @private\n     */\n    this.renderSize_ = toSize(options.grid.getTileSize(options.tile.tileCoord[0]));\n\n    /**\n     * @type {number}\n     */\n    this.bandCount = NaN;\n    const coords = new WebGLArrayBuffer(ARRAY_BUFFER, STATIC_DRAW);\n    coords.fromArray([0,\n    // P0\n    1, 1,\n    // P1\n    1, 1,\n    // P2\n    0, 0,\n    // P3\n    0]);\n    this.helper_.flushBufferData(coords);\n\n    /**\n     * @type {WebGLArrayBuffer}\n     */\n    this.coords = coords;\n    this.setTile(options.tile);\n  }\n  uploadTile() {\n    const helper = this.helper_;\n    const gl = helper.getGL();\n    const tile = this.tile;\n    this.textures.length = 0;\n\n    /**\n     * @type {import(\"../DataTile.js\").Data}\n     */\n    let data;\n    if (tile instanceof ImageTile || tile instanceof ReprojTile) {\n      data = tile.getImage();\n    } else {\n      data = tile.getData();\n    }\n    const image = asImageLike(data);\n    if (image) {\n      const texture = gl.createTexture();\n      this.textures.push(texture);\n      this.bandCount = 4;\n      uploadImageTexture(gl, texture, image, tile.interpolate);\n      this.setReady();\n      return;\n    }\n    data = asArrayLike(data);\n    const sourceTileSize = /** @type {DataTile} */tile.getSize();\n    const pixelSize = [sourceTileSize[0] + 2 * this.gutter_, sourceTileSize[1] + 2 * this.gutter_];\n    const isFloat = data instanceof Float32Array;\n    const pixelCount = pixelSize[0] * pixelSize[1];\n    const DataType = isFloat ? Float32Array : Uint8Array;\n    const bytesPerElement = DataType.BYTES_PER_ELEMENT;\n    const bytesPerRow = data.byteLength / pixelSize[1];\n    this.bandCount = Math.floor(bytesPerRow / bytesPerElement / pixelSize[0]);\n    const textureCount = Math.ceil(this.bandCount / 4);\n    if (textureCount === 1) {\n      const texture = gl.createTexture();\n      this.textures.push(texture);\n      uploadDataTexture(helper, texture, data, pixelSize, this.bandCount, tile.interpolate);\n      this.setReady();\n      return;\n    }\n    const textureDataArrays = new Array(textureCount);\n    for (let textureIndex = 0; textureIndex < textureCount; ++textureIndex) {\n      const texture = gl.createTexture();\n      this.textures.push(texture);\n      const bandCount = textureIndex < textureCount - 1 ? 4 : (this.bandCount - 1) % 4 + 1;\n      textureDataArrays[textureIndex] = new DataType(pixelCount * bandCount);\n    }\n    let dataIndex = 0;\n    let rowOffset = 0;\n    const colCount = pixelSize[0] * this.bandCount;\n    for (let rowIndex = 0; rowIndex < pixelSize[1]; ++rowIndex) {\n      for (let colIndex = 0; colIndex < colCount; ++colIndex) {\n        const dataValue = data[rowOffset + colIndex];\n        const pixelIndex = Math.floor(dataIndex / this.bandCount);\n        const bandIndex = colIndex % this.bandCount;\n        const textureIndex = Math.floor(bandIndex / 4);\n        const textureData = textureDataArrays[textureIndex];\n        const bandCount = textureData.length / pixelCount;\n        const textureBandIndex = bandIndex % 4;\n        textureData[pixelIndex * bandCount + textureBandIndex] = dataValue;\n        ++dataIndex;\n      }\n      rowOffset += bytesPerRow / bytesPerElement;\n    }\n    for (let textureIndex = 0; textureIndex < textureCount; ++textureIndex) {\n      const texture = this.textures[textureIndex];\n      const textureData = textureDataArrays[textureIndex];\n      const bandCount = textureData.length / pixelCount;\n      uploadDataTexture(helper, texture, textureData, pixelSize, bandCount, tile.interpolate);\n    }\n    this.setReady();\n  }\n  disposeInternal() {\n    const gl = this.helper_.getGL();\n    this.helper_.deleteBuffer(this.coords);\n    for (let i = 0; i < this.textures.length; ++i) {\n      gl.deleteTexture(this.textures[i]);\n    }\n    this.tile.removeEventListener(EventType.CHANGE, this.handleTileChange_);\n  }\n\n  /**\n   * @param {import(\"../DataTile.js\").ImageLike} image The image.\n   * @param {number} renderCol The column index (in rendered tile space).\n   * @param {number} renderRow The row index (in rendered tile space).\n   * @return {Uint8ClampedArray|null} The data.\n   * @private\n   */\n  getImagePixelData_(image, renderCol, renderRow) {\n    const gutter = this.gutter_;\n    const renderWidth = this.renderSize_[0];\n    const renderHeight = this.renderSize_[1];\n    if (!pixelContext) {\n      createPixelContext();\n    }\n    pixelContext.clearRect(0, 0, 1, 1);\n    const sourceWidth = image.width;\n    const sourceHeight = image.height;\n    const sourceWidthWithoutGutter = sourceWidth - 2 * gutter;\n    const sourceHeightWithoutGutter = sourceHeight - 2 * gutter;\n    const sourceCol = gutter + Math.floor(sourceWidthWithoutGutter * (renderCol / renderWidth));\n    const sourceRow = gutter + Math.floor(sourceHeightWithoutGutter * (renderRow / renderHeight));\n    let data;\n    try {\n      pixelContext.drawImage(image, sourceCol, sourceRow, 1, 1, 0, 0, 1, 1);\n      data = pixelContext.getImageData(0, 0, 1, 1).data;\n    } catch (err) {\n      pixelContext = null;\n      return null;\n    }\n    return data;\n  }\n\n  /**\n   * @param {import(\"../DataTile.js\").ArrayLike} data The data.\n   * @param {import(\"../size.js\").Size} sourceSize The size.\n   * @param {number} renderCol The column index (in rendered tile space).\n   * @param {number} renderRow The row index (in rendered tile space).\n   * @return {import(\"../DataTile.js\").ArrayLike|null} The data.\n   * @private\n   */\n  getArrayPixelData_(data, sourceSize, renderCol, renderRow) {\n    const gutter = this.gutter_;\n    const renderWidth = this.renderSize_[0];\n    const renderHeight = this.renderSize_[1];\n    const sourceWidthWithoutGutter = sourceSize[0];\n    const sourceHeightWithoutGutter = sourceSize[1];\n    const sourceWidth = sourceWidthWithoutGutter + 2 * gutter;\n    const sourceHeight = sourceHeightWithoutGutter + 2 * gutter;\n    const sourceCol = gutter + Math.floor(sourceWidthWithoutGutter * (renderCol / renderWidth));\n    const sourceRow = gutter + Math.floor(sourceHeightWithoutGutter * (renderRow / renderHeight));\n    if (data instanceof DataView) {\n      const bytesPerPixel = data.byteLength / (sourceWidth * sourceHeight);\n      const offset = bytesPerPixel * (sourceRow * sourceWidth + sourceCol);\n      const buffer = data.buffer.slice(offset, offset + bytesPerPixel);\n      return new DataView(buffer);\n    }\n    const offset = this.bandCount * (sourceRow * sourceWidth + sourceCol);\n    return data.slice(offset, offset + this.bandCount);\n  }\n\n  /**\n   * Get data for a pixel.  If the tile is not loaded, null is returned.\n   * @param {number} renderCol The column index (in rendered tile space).\n   * @param {number} renderRow The row index (in rendered tile space).\n   * @return {import(\"../DataTile.js\").ArrayLike|null} The data.\n   */\n  getPixelData(renderCol, renderRow) {\n    if (!this.loaded) {\n      return null;\n    }\n    if (this.tile instanceof DataTile) {\n      const data = this.tile.getData();\n      const arrayData = asArrayLike(data);\n      if (arrayData) {\n        const sourceSize = this.tile.getSize();\n        return this.getArrayPixelData_(arrayData, sourceSize, renderCol, renderRow);\n      }\n      return this.getImagePixelData_(asImageLike(data), renderCol, renderRow);\n    }\n    return this.getImagePixelData_(this.tile.getImage(), renderCol, renderRow);\n  }\n}\nexport default TileTexture;","map":{"version":3,"names":["BaseTileRepresentation","DataTile","asArrayLike","asImageLike","EventType","ImageTile","ReprojTile","WebGLArrayBuffer","ARRAY_BUFFER","STATIC_DRAW","createCanvasContext2D","toSize","bindAndConfigure","gl","texture","interpolate","resampleFilter","LINEAR","NEAREST","bindTexture","TEXTURE_2D","texParameteri","TEXTURE_WRAP_S","CLAMP_TO_EDGE","TEXTURE_WRAP_T","TEXTURE_MIN_FILTER","TEXTURE_MAG_FILTER","uploadImageTexture","image","texImage2D","RGBA","UNSIGNED_BYTE","uploadDataTexture","helper","data","size","bandCount","getGL","textureType","canInterpolate","Float32Array","FLOAT","getExtension","extension","bytesPerRow","byteLength","unpackAlignment","format","LUMINANCE","LUMINANCE_ALPHA","RGB","Error","concat","oldUnpackAlignment","getParameter","UNPACK_ALIGNMENT","pixelStorei","pixelContext","createPixelContext","undefined","willReadFrequently","TileTexture","constructor","options","textures","renderSize_","grid","getTileSize","tile","tileCoord","NaN","coords","fromArray","helper_","flushBufferData","setTile","uploadTile","length","getImage","getData","createTexture","push","setReady","sourceTileSize","getSize","pixelSize","gutter_","isFloat","pixelCount","DataType","Uint8Array","bytesPerElement","BYTES_PER_ELEMENT","Math","floor","textureCount","ceil","textureDataArrays","Array","textureIndex","dataIndex","rowOffset","colCount","rowIndex","colIndex","dataValue","pixelIndex","bandIndex","textureData","textureBandIndex","disposeInternal","deleteBuffer","i","deleteTexture","removeEventListener","CHANGE","handleTileChange_","getImagePixelData_","renderCol","renderRow","gutter","renderWidth","renderHeight","clearRect","sourceWidth","width","sourceHeight","height","sourceWidthWithoutGutter","sourceHeightWithoutGutter","sourceCol","sourceRow","drawImage","getImageData","err","getArrayPixelData_","sourceSize","DataView","bytesPerPixel","offset","buffer","slice","getPixelData","loaded","arrayData"],"sources":["C:/Users/dongwoo/Desktop/WeatherWhisperer/src/main/fronted/node_modules/ol/webgl/TileTexture.js"],"sourcesContent":["/**\n * @module ol/webgl/TileTexture\n */\n\nimport BaseTileRepresentation from './BaseTileRepresentation.js';\nimport DataTile, {asArrayLike, asImageLike} from '../DataTile.js';\nimport EventType from '../events/EventType.js';\nimport ImageTile from '../ImageTile.js';\nimport ReprojTile from '../reproj/Tile.js';\nimport WebGLArrayBuffer from './Buffer.js';\nimport {ARRAY_BUFFER, STATIC_DRAW} from '../webgl.js';\nimport {createCanvasContext2D} from '../dom.js';\nimport {toSize} from '../size.js';\n\n/**\n * @param {WebGLRenderingContext} gl The WebGL context.\n * @param {WebGLTexture} texture The texture.\n * @param {boolean} interpolate Interpolate when resampling.\n */\nfunction bindAndConfigure(gl, texture, interpolate) {\n  const resampleFilter = interpolate ? gl.LINEAR : gl.NEAREST;\n  gl.bindTexture(gl.TEXTURE_2D, texture);\n  gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);\n  gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);\n  gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, resampleFilter);\n  gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, resampleFilter);\n}\n\n/**\n * @param {WebGLRenderingContext} gl The WebGL context.\n * @param {WebGLTexture} texture The texture.\n * @param {import(\"../DataTile.js\").ImageLike} image The image.\n * @param {boolean} interpolate Interpolate when resampling.\n */\nfunction uploadImageTexture(gl, texture, image, interpolate) {\n  bindAndConfigure(gl, texture, interpolate);\n\n  gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, gl.RGBA, gl.UNSIGNED_BYTE, image);\n}\n\n/**\n * @param {import(\"./Helper.js\").default} helper The WebGL helper.\n * @param {WebGLTexture} texture The texture.\n * @param {import(\"../DataTile.js\").ArrayLike} data The pixel data.\n * @param {import(\"../size.js\").Size} size The pixel size.\n * @param {number} bandCount The band count.\n * @param {boolean} interpolate Interpolate when resampling.\n */\nfunction uploadDataTexture(\n  helper,\n  texture,\n  data,\n  size,\n  bandCount,\n  interpolate\n) {\n  const gl = helper.getGL();\n  let textureType;\n  let canInterpolate;\n  if (data instanceof Float32Array) {\n    textureType = gl.FLOAT;\n    helper.getExtension('OES_texture_float');\n    const extension = helper.getExtension('OES_texture_float_linear');\n    canInterpolate = extension !== null;\n  } else {\n    textureType = gl.UNSIGNED_BYTE;\n    canInterpolate = true;\n  }\n  bindAndConfigure(gl, texture, interpolate && canInterpolate);\n\n  const bytesPerRow = data.byteLength / size[1];\n  let unpackAlignment = 1;\n  if (bytesPerRow % 8 === 0) {\n    unpackAlignment = 8;\n  } else if (bytesPerRow % 4 === 0) {\n    unpackAlignment = 4;\n  } else if (bytesPerRow % 2 === 0) {\n    unpackAlignment = 2;\n  }\n\n  let format;\n  switch (bandCount) {\n    case 1: {\n      format = gl.LUMINANCE;\n      break;\n    }\n    case 2: {\n      format = gl.LUMINANCE_ALPHA;\n      break;\n    }\n    case 3: {\n      format = gl.RGB;\n      break;\n    }\n    case 4: {\n      format = gl.RGBA;\n      break;\n    }\n    default: {\n      throw new Error(`Unsupported number of bands: ${bandCount}`);\n    }\n  }\n\n  const oldUnpackAlignment = gl.getParameter(gl.UNPACK_ALIGNMENT);\n  gl.pixelStorei(gl.UNPACK_ALIGNMENT, unpackAlignment);\n  gl.texImage2D(\n    gl.TEXTURE_2D,\n    0,\n    format,\n    size[0],\n    size[1],\n    0,\n    format,\n    textureType,\n    data\n  );\n  gl.pixelStorei(gl.UNPACK_ALIGNMENT, oldUnpackAlignment);\n}\n\n/**\n * @type {CanvasRenderingContext2D}\n */\nlet pixelContext = null;\n\nfunction createPixelContext() {\n  pixelContext = createCanvasContext2D(1, 1, undefined, {\n    willReadFrequently: true,\n  });\n}\n\n/**\n * @typedef {import(\"../DataTile.js\").default|ImageTile|ReprojTile} TileType\n */\n\n/**\n * @extends {BaseTileRepresentation<TileType>}\n */\nclass TileTexture extends BaseTileRepresentation {\n  /**\n   * @param {import(\"./BaseTileRepresentation.js\").TileRepresentationOptions<TileType>} options The tile texture options.\n   */\n  constructor(options) {\n    super(options);\n\n    /**\n     * @type {Array<WebGLTexture>}\n     */\n    this.textures = [];\n\n    /**\n     * @type {import(\"../size.js\").Size}\n     * @private\n     */\n    this.renderSize_ = toSize(\n      options.grid.getTileSize(options.tile.tileCoord[0])\n    );\n\n    /**\n     * @type {number}\n     */\n    this.bandCount = NaN;\n\n    const coords = new WebGLArrayBuffer(ARRAY_BUFFER, STATIC_DRAW);\n    coords.fromArray([\n      0, // P0\n      1,\n      1, // P1\n      1,\n      1, // P2\n      0,\n      0, // P3\n      0,\n    ]);\n    this.helper_.flushBufferData(coords);\n\n    /**\n     * @type {WebGLArrayBuffer}\n     */\n    this.coords = coords;\n\n    this.setTile(options.tile);\n  }\n\n  uploadTile() {\n    const helper = this.helper_;\n    const gl = helper.getGL();\n    const tile = this.tile;\n\n    this.textures.length = 0;\n\n    /**\n     * @type {import(\"../DataTile.js\").Data}\n     */\n    let data;\n\n    if (tile instanceof ImageTile || tile instanceof ReprojTile) {\n      data = tile.getImage();\n    } else {\n      data = tile.getData();\n    }\n\n    const image = asImageLike(data);\n    if (image) {\n      const texture = gl.createTexture();\n      this.textures.push(texture);\n      this.bandCount = 4;\n      uploadImageTexture(gl, texture, image, tile.interpolate);\n      this.setReady();\n      return;\n    }\n\n    data = asArrayLike(data);\n\n    const sourceTileSize = /** @type {DataTile} */ (tile).getSize();\n    const pixelSize = [\n      sourceTileSize[0] + 2 * this.gutter_,\n      sourceTileSize[1] + 2 * this.gutter_,\n    ];\n    const isFloat = data instanceof Float32Array;\n    const pixelCount = pixelSize[0] * pixelSize[1];\n    const DataType = isFloat ? Float32Array : Uint8Array;\n    const bytesPerElement = DataType.BYTES_PER_ELEMENT;\n    const bytesPerRow = data.byteLength / pixelSize[1];\n\n    this.bandCount = Math.floor(bytesPerRow / bytesPerElement / pixelSize[0]);\n    const textureCount = Math.ceil(this.bandCount / 4);\n\n    if (textureCount === 1) {\n      const texture = gl.createTexture();\n      this.textures.push(texture);\n      uploadDataTexture(\n        helper,\n        texture,\n        data,\n        pixelSize,\n        this.bandCount,\n        tile.interpolate\n      );\n      this.setReady();\n      return;\n    }\n\n    const textureDataArrays = new Array(textureCount);\n    for (let textureIndex = 0; textureIndex < textureCount; ++textureIndex) {\n      const texture = gl.createTexture();\n      this.textures.push(texture);\n\n      const bandCount =\n        textureIndex < textureCount - 1 ? 4 : ((this.bandCount - 1) % 4) + 1;\n      textureDataArrays[textureIndex] = new DataType(pixelCount * bandCount);\n    }\n\n    let dataIndex = 0;\n    let rowOffset = 0;\n    const colCount = pixelSize[0] * this.bandCount;\n    for (let rowIndex = 0; rowIndex < pixelSize[1]; ++rowIndex) {\n      for (let colIndex = 0; colIndex < colCount; ++colIndex) {\n        const dataValue = data[rowOffset + colIndex];\n\n        const pixelIndex = Math.floor(dataIndex / this.bandCount);\n        const bandIndex = colIndex % this.bandCount;\n        const textureIndex = Math.floor(bandIndex / 4);\n        const textureData = textureDataArrays[textureIndex];\n        const bandCount = textureData.length / pixelCount;\n        const textureBandIndex = bandIndex % 4;\n        textureData[pixelIndex * bandCount + textureBandIndex] = dataValue;\n\n        ++dataIndex;\n      }\n      rowOffset += bytesPerRow / bytesPerElement;\n    }\n\n    for (let textureIndex = 0; textureIndex < textureCount; ++textureIndex) {\n      const texture = this.textures[textureIndex];\n      const textureData = textureDataArrays[textureIndex];\n      const bandCount = textureData.length / pixelCount;\n      uploadDataTexture(\n        helper,\n        texture,\n        textureData,\n        pixelSize,\n        bandCount,\n        tile.interpolate\n      );\n    }\n\n    this.setReady();\n  }\n\n  disposeInternal() {\n    const gl = this.helper_.getGL();\n    this.helper_.deleteBuffer(this.coords);\n    for (let i = 0; i < this.textures.length; ++i) {\n      gl.deleteTexture(this.textures[i]);\n    }\n    this.tile.removeEventListener(EventType.CHANGE, this.handleTileChange_);\n  }\n\n  /**\n   * @param {import(\"../DataTile.js\").ImageLike} image The image.\n   * @param {number} renderCol The column index (in rendered tile space).\n   * @param {number} renderRow The row index (in rendered tile space).\n   * @return {Uint8ClampedArray|null} The data.\n   * @private\n   */\n  getImagePixelData_(image, renderCol, renderRow) {\n    const gutter = this.gutter_;\n    const renderWidth = this.renderSize_[0];\n    const renderHeight = this.renderSize_[1];\n\n    if (!pixelContext) {\n      createPixelContext();\n    }\n    pixelContext.clearRect(0, 0, 1, 1);\n\n    const sourceWidth = image.width;\n    const sourceHeight = image.height;\n\n    const sourceWidthWithoutGutter = sourceWidth - 2 * gutter;\n    const sourceHeightWithoutGutter = sourceHeight - 2 * gutter;\n\n    const sourceCol =\n      gutter + Math.floor(sourceWidthWithoutGutter * (renderCol / renderWidth));\n\n    const sourceRow =\n      gutter +\n      Math.floor(sourceHeightWithoutGutter * (renderRow / renderHeight));\n\n    let data;\n    try {\n      pixelContext.drawImage(image, sourceCol, sourceRow, 1, 1, 0, 0, 1, 1);\n      data = pixelContext.getImageData(0, 0, 1, 1).data;\n    } catch (err) {\n      pixelContext = null;\n      return null;\n    }\n    return data;\n  }\n\n  /**\n   * @param {import(\"../DataTile.js\").ArrayLike} data The data.\n   * @param {import(\"../size.js\").Size} sourceSize The size.\n   * @param {number} renderCol The column index (in rendered tile space).\n   * @param {number} renderRow The row index (in rendered tile space).\n   * @return {import(\"../DataTile.js\").ArrayLike|null} The data.\n   * @private\n   */\n  getArrayPixelData_(data, sourceSize, renderCol, renderRow) {\n    const gutter = this.gutter_;\n    const renderWidth = this.renderSize_[0];\n    const renderHeight = this.renderSize_[1];\n\n    const sourceWidthWithoutGutter = sourceSize[0];\n    const sourceHeightWithoutGutter = sourceSize[1];\n    const sourceWidth = sourceWidthWithoutGutter + 2 * gutter;\n    const sourceHeight = sourceHeightWithoutGutter + 2 * gutter;\n\n    const sourceCol =\n      gutter + Math.floor(sourceWidthWithoutGutter * (renderCol / renderWidth));\n\n    const sourceRow =\n      gutter +\n      Math.floor(sourceHeightWithoutGutter * (renderRow / renderHeight));\n\n    if (data instanceof DataView) {\n      const bytesPerPixel = data.byteLength / (sourceWidth * sourceHeight);\n      const offset = bytesPerPixel * (sourceRow * sourceWidth + sourceCol);\n      const buffer = data.buffer.slice(offset, offset + bytesPerPixel);\n      return new DataView(buffer);\n    }\n\n    const offset = this.bandCount * (sourceRow * sourceWidth + sourceCol);\n    return data.slice(offset, offset + this.bandCount);\n  }\n\n  /**\n   * Get data for a pixel.  If the tile is not loaded, null is returned.\n   * @param {number} renderCol The column index (in rendered tile space).\n   * @param {number} renderRow The row index (in rendered tile space).\n   * @return {import(\"../DataTile.js\").ArrayLike|null} The data.\n   */\n  getPixelData(renderCol, renderRow) {\n    if (!this.loaded) {\n      return null;\n    }\n\n    if (this.tile instanceof DataTile) {\n      const data = this.tile.getData();\n      const arrayData = asArrayLike(data);\n      if (arrayData) {\n        const sourceSize = this.tile.getSize();\n        return this.getArrayPixelData_(\n          arrayData,\n          sourceSize,\n          renderCol,\n          renderRow\n        );\n      }\n      return this.getImagePixelData_(asImageLike(data), renderCol, renderRow);\n    }\n\n    return this.getImagePixelData_(this.tile.getImage(), renderCol, renderRow);\n  }\n}\n\nexport default TileTexture;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}